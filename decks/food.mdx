import { CodeSurfer as Surfer } from "code-surfer";
import { CodeSurferColumns, Step } from "code-surfer";
import { Appear, Background } from "gatsby-theme-mdx-deck";
import * as L from "../src/layout";
import customTheme from "../src/theme";
import GreetingLoader from "./src/greeting-loader";

export const theme = customTheme;

<L.Column>

# Designing a ChatBot using DiagFlow
## By Shayan _____ and Ruby _____

</L.Column>

---

<L.Row>

## Google DialogFlow

### A platform that provides a use-case specific, engaging voice and text-based conversations


</L.Row>

---

<L.Column>

## What is DialogFlow?

-  A tool that allows you to make bots that understand human conversation
-  Makes Natural language understanding easier
-  You can use your bot on any platform! 

</L.Column>

---

<L.Row>

## Agent

### The face of your bot

</L.Row>

---

<L.Row>

## Intent

### Actions that a user can perform on your agent, how to respond 

</L.Row>

---

<L.Column>

## Entity - keywords
- Dates
- Events
- Distance

</L.Column>

---

<L.Row>

## Context

### A context-aware bot can remember things, and hold conversations
 
</L.Row>

---

<Background />
<L.Column sx={{ minHeight: '0' }}>

## Let’s get started!

### Make a Reddit bot that tells a joke or an interesting fact from the day’s top threads on specific subreddits

</L.Column>

---

<Background />
<L.Column sx={{ minHeight: '0' }}>

## Creating an Agent
- Log in to the DialogFlow dashboard using your Google account.
- Click on “Create Agent”
- Enter the name of the agent, and hit “Create”.

</L.Column>

---

![alt](https://miro.medium.com/max/1352/1*YtoDfzRkmQKZQ1ZF5grlqg.png)

---

<Background />
<L.Column sx={{ minHeight: '0' }}>

## Setting up a “Welcome” Intent
- Go ahead and click on the “Default Welcome Intent”. 

</L.Column>

---

![alt](https://miro.medium.com/max/1338/1*17fJvpbsXDEiJS27c-SQ3Q.png)

---
- Fill in user says as below
![alt](https://miro.medium.com/max/1286/1*oVhd4vtHRX2wdmzQhyHXKA.png)

---
- Scroll down to the “Responses” tab
- Delete the welcome messages
- Fill in "Responses" as below
- Click "Save"
![alt](https://miro.medium.com/max/1274/1*XQP5t-xjET-cOyScUOvbIA.png)

---

<L.Row>

## Creating a Custom Entity

### Entities are what we extract from user’s input to process further

</L.Row>

<Background />

---

- Click on the “Entities” tab on left-sidebar and click “Create Entity”
- Name our Entity “content”
- Fill in the following details
![alt](https://miro.medium.com/max/1340/1*tqgTKE81ygcZixwgjgbIQA.png)

---

<L.Row>

## Attaching our new Entity to the Intent
### Create a new Intent called “say-content”

</L.Row>

<Background />

---

- Add the phrase “Let’s hear a joke” in the “User Says” section

![alt](https://miro.medium.com/max/1298/1*m5SljbVUh7sXCRrGd9gnaw.png)

---
- Let’s add a few more inputs

![alt](https://miro.medium.com/max/1260/1*QkVnOdZDf2ytVWLOACXNrw.png)

---
- Let’s add a placeholder text response to see it work
- scroll to the bottom section “Response”, and fill it like so

![alt](https://miro.medium.com/max/1264/1*JRZ2LQF9H9gIOV0kofT_tA.png)

---
- Click on “Try It Now” to test your work
- ![alt](https://miro.medium.com/max/734/1*XbwTQ0aJJze7P1yYQiSU1Q.png)

---

<L.Column>

# A Webhook to process requests
- Write a JS app that fulfills the request by querying the Reddit’s website and returning the appropriate content.

</L.Column>

---
 # code
---

<L.Column>

## Steps

- Follow the 5 steps on "Using the gcloud Command-Line Tool"
- Deploy our function using gcloud:
$ gcloud beta functions deploy appWebHook — stage-bucket BUCKET_NAME — trigger-http
- Go to your Google project’s console and click on Cloud Storage under the Resources section to find the BUCKET_NAME
- After you run the command, make note of the httpsTrigger URL mentioned.

</L.Column>

---
- On the Dialoglow platform, find the “Fulfilment” tab on the sidebar
- Enable webhooks and paste in the URL
![alt](https://miro.medium.com/max/1304/1*OfM33HGzMKT7KdQ3_NAbsA.png)

---
- Visit the “say_content” Intent page
- Make the “content” parameter mandatory.
![alt](https://miro.medium.com/max/1278/1*WjmH2nK1eMI6Y_GxqMz8mg.png)
---
- Enable the “Use webhook” checkbox in “Fulfilment”
- Click "save" and test it out 
![alt](https://miro.medium.com/max/1282/1*2YgXKe9vTFuKFC5LISKBxQ.png)
---

<L.Column>

## Adding Context to our Bot

- “More”  
- “More please”
- “Give me another one”

</L.Column>

---

<L.Column>

## Steps
- scroll up on the “say-content” Intent’s page and find the “Contexts” section
- Set output the “context” for a count of 5

</L.Column>

---

- Create new content 

![alt](https://miro.medium.com/max/1272/1*AiCE8PiKuXtM6idxXX-kUA.png)

---

![alt](https://miro.medium.com/max/1288/1*Kb08-hg0r8IyMSqagup_3g.png)

---
<L.Row>

## Integrations.

### Using the Web Demo.
- Go to “Integrations” tab from the sidebar and enable “Web Demo” settings

</L.Row>

---

![alt](https://miro.medium.com/max/1400/1*KielXkMS40_mfivzNABo8w.png)

---

## That’s it! Your bot is ready to face a real person!

---

<L.Row>

## Debugging and Tips

- Go to your Google Project and check the Errors and Reporting tab 
- Enabled billing

</L.Row>

---

<L.Row>

## Review

### What we accomplished and how we did it.

</L.Row>

---

<L.Row>

## Thank you!

### Questions and Answers

</L.Row>
